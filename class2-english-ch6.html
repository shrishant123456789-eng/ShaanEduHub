<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 6: Tenses (Very Simple) | Class 2 English</title>
    <style>
        /* üé® CHILD-FRIENDLY THEME */
        :root {
            --primary: #FF8A5B;       /* Coral Orange */
            --secondary: #25D366;     /* Bright Green */
            --future: #4D96FF;        /* Sky Blue */
            --past: #FF5C8D;          /* Pink/Red */
            --present: #00C9A7;       /* Teal */
            --bg: #FFF5E1;            /* Creamy Background */
            --card: #FFFFFF;
            --text: #2D3436;
            --font: 'Comic Sans MS', 'Comic Neue', cursive, sans-serif;
            --shadow: 0 8px 0 rgba(0,0,0,0.1);
        }

        * { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: var(--font);
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* üü¢ HEADER */
        header {
            background: #FFD93D; /* Sunny Yellow */
            color: #444;
            padding: 15px;
            text-align: center;
            border-bottom: 5px solid #FFC107;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        h1 { margin: 0; font-size: 1.6rem; color: #E056FD; text-shadow: 2px 2px 0 #fff; }
        .objective { font-size: 1rem; margin-top: 5px; color: #555; background: rgba(255,255,255,0.5); padding: 5px; border-radius: 10px; display: inline-block; }

        /* üß≠ MAIN CONTAINER */
        .container {
            flex: 1;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        /* üÉè MENU CARDS */
        .menu-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .menu-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            text-align: left;
            border: 4px solid transparent;
            box-shadow: 0 6px 0 rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s;
            position: relative;
            overflow: hidden;
        }
        
        .menu-card:active { transform: scale(0.98); box-shadow: 0 2px 0 rgba(0,0,0,0.1); }
        .menu-card h2 { margin: 0; font-size: 1.4rem; }
        .menu-card p { margin: 5px 0 0; opacity: 0.8; font-size: 0.9rem; }
        .icon { float: right; font-size: 2.5rem; margin-top: -10px; }

        /* Specific Card Colors */
        .card-present { border-color: var(--present); color: #008F7A; background: #E0FFF8; }
        .card-past { border-color: var(--past); color: #C44569; background: #FFE0E9; }
        .card-future { border-color: var(--future); color: #273C75; background: #E0F0FF; }
        .card-mix { border-color: #A3CB38; color: #4b6608; background: #F4F8E0; }

        /* üéÆ GAME AREA */
        #game-screen { display: none; }

        .learn-box {
            background: #fff;
            border-left: 6px solid var(--primary);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            font-size: 1.1rem;
        }
        .learn-box strong { color: var(--primary); }

        .question-card {
            background: white;
            padding: 25px;
            border-radius: 25px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            text-align: center;
            margin-bottom: 20px;
            border: 3px solid #eee;
        }

        .q-text { font-size: 1.5rem; font-weight: bold; margin-bottom: 20px; line-height: 1.5; color: #333; }
        .highlight { color: var(--primary); text-decoration: underline; }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .option-btn {
            background: white;
            border: 3px solid #ddd;
            color: #555;
            padding: 15px;
            border-radius: 15px;
            font-size: 1.3rem;
            font-family: var(--font);
            cursor: pointer;
            box-shadow: 0 5px 0 #ccc;
            transition: 0.2s;
        }

        .option-btn:active { transform: translateY(5px); box-shadow: none; }

        /* üö¶ FEEDBACK */
        #feedback-area {
            text-align: center;
            font-weight: bold;
            font-size: 1.2rem;
            margin-top: 15px;
            height: 30px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .correct-btn { background: #C8F7C5 !important; border-color: #2ECC71 !important; box-shadow: none !important; color: #006400 !important; }
        .wrong-btn { background: #FFD3D3 !important; border-color: #FF5252 !important; box-shadow: none !important; color: #8B0000 !important; }

        /* Buttons */
        .nav-btn {
            background: var(--text);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-family: var(--font);
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            display: none;
            box-shadow: 0 5px 0 #000;
        }
        .nav-btn:active { transform: translateY(5px); box-shadow: none; }

        /* üìä PROGRESS & SCORE */
        .progress-container {
            background: #eee;
            border-radius: 10px;
            height: 10px;
            width: 100%;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-bar { height: 100%; background: #FFD93D; width: 0%; transition: width 0.3s; }

        .scoreboard {
            background: #fff;
            border-top: 4px solid var(--primary);
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1rem;
            position: sticky;
            bottom: 0;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.05);
            z-index: 100;
        }

        .score-box span { display: block; font-size: 0.8rem; color: #888; }
        .score-val { font-size: 1.2rem; font-weight: bold; }

        /* üè† HOME BUTTON */
        .home-btn-top {
            background: none; border: 2px solid #555;
            padding: 5px 15px; border-radius: 20px;
            font-size: 0.9rem; cursor: pointer;
            margin-bottom: 10px; display: inline-block;
        }

        /* üèÜ END SCREEN */
        #end-screen { display: none; text-align: center; padding: 20px; }
        .big-emoji { font-size: 4rem; display: block; margin-bottom: 10px; }

        @media (max-width: 400px) {
            h1 { font-size: 1.4rem; }
            .option-btn { font-size: 1.1rem; padding: 12px; }
        }
    </style>
</head>
<body>

    <header>
        <h1>‚è∞ Chapter 6: Tenses</h1>
        <div class="objective">Tense tells us <b>when</b> an action happens.</div>
    </header>

    <div class="container">
        
        <div id="menu-screen" class="menu-grid">
            <div class="menu-card card-present" onclick="startGame('present')">
                <div class="icon">üåû</div>
                <h2>Present Tense</h2>
                <p>Happens Every Day (Now)</p>
            </div>
            <div class="menu-card card-past" onclick="startGame('past')">
                <div class="icon">üåô</div>
                <h2>Past Tense</h2>
                <p>Happened Yesterday</p>
            </div>
            <div class="menu-card card-future" onclick="startGame('future')">
                <div class="icon">üöÄ</div>
                <h2>Future Tense</h2>
                <p>Will Happen Later</p>
            </div>
            <div class="menu-card card-mix" onclick="startGame('mix')">
                <div class="icon">üé≤</div>
                <h2>Mixed Practice</h2>
                <p>Are you a Tense Master?</p>
            </div>
        </div>

        <div id="game-screen">
            <button class="home-btn-top" onclick="goHome()">üè† Back Home</button>
            
            <div class="progress-container">
                <div id="progress-bar" class="progress-bar"></div>
            </div>

            <div id="learn-card" class="learn-box">
                <span id="learn-text"></span>
            </div>

            <div class="question-card">
                <div id="q-text" class="q-text">Loading...</div>
                <div id="options-container" class="options-grid"></div>
                <div id="feedback-area"></div>
            </div>

            <button id="next-btn" class="nav-btn" onclick="nextQuestion()">Next Question ‚û°Ô∏è</button>
        </div>

        <div id="end-screen">
            <span class="big-emoji">üèÜ</span>
            <h2 style="color:var(--primary)">Chapter Complete!</h2>
            <p style="font-size:1.2rem;">Your Score: <b id="final-score" style="color:var(--present)">0%</b></p>
            <p>Correct: <span id="final-correct">0</span> | Wrong: <span id="final-wrong">0</span></p>
            <button class="nav-btn" style="display:block; background:var(--secondary);" onclick="goHome()">Play Again</button>
        </div>

    </div>

    <div class="scoreboard">
        <div class="score-box" style="color:#27ae60">
            <span>‚úî Correct</span>
            <div id="score-correct" class="score-val">0</div>
        </div>
        <div class="score-box" style="color:#2D3436">
            <span>üìä Score</span>
            <div id="score-pct" class="score-val">0%</div>
        </div>
        <div class="score-box" style="color:#c0392b">
            <span>‚ùå Wrong</span>
            <div id="score-wrong" class="score-val">0</div>
        </div>
    </div>

    <div style="text-align:center; padding:10px; font-size:0.8rem; color:#aaa; background:#fff;">
        Designed & Created by SHRISHANT YADAV
    </div>

<script>
    /* üß† QUESTION DATABASE - 75+ Unique Questions */
    const questionBank = [
        // üü¢ SECTION 1: PRESENT TENSE (Now / Every Day)
        { id: 'p1', cat: 'present', q: "I ___ milk every day.", ans: "drink", opts: ["drink", "drank"], hint: "Daily action" },
        { id: 'p2', cat: 'present', q: "She ___ to school.", ans: "goes", opts: ["go", "goes"], hint: "She goes..." },
        { id: 'p3', cat: 'present', q: "We ___ cricket in the park.", ans: "play", opts: ["play", "played"], hint: "Happens now" },
        { id: 'p4', cat: 'present', q: "The sun ___ in the sky.", ans: "shines", opts: ["shines", "shone"], hint: "It is doing it now" },
        { id: 'p5', cat: 'present', q: "My mother ___ tasty food.", ans: "cooks", opts: ["cooks", "cooked"], hint: "Daily habit" },
        { id: 'p6', cat: 'present', q: "Cats ___ milk.", ans: "like", opts: ["like", "likes"], hint: "Plural cats" },
        { id: 'p7', cat: 'present', q: "He ___ a book.", ans: "reads", opts: ["read", "reads"], hint: "One person" },
        { id: 'p8', cat: 'present', q: "Birds ___ in the sky.", ans: "fly", opts: ["fly", "flew"], hint: "General truth" },
        { id: 'p9', cat: 'present', q: "I ___ my teeth daily.", ans: "brush", opts: ["brush", "brushed"], hint: "Daily action" },
        { id: 'p10', cat: 'present', q: "The dog ___ loudly.", ans: "barks", opts: ["barks", "barked"], hint: "Now" },
        { id: 'p11', cat: 'present', q: "You ___ very fast.", ans: "run", opts: ["run", "ran"], hint: "Now" },
        { id: 'p12', cat: 'present', q: "We ___ TV in the evening.", ans: "watch", opts: ["watch", "watched"], hint: "Daily routine" },
        { id: 'p13', cat: 'present', q: "My father ___ to office.", ans: "goes", opts: ["go", "goes"], hint: "One person" },
        { id: 'p14', cat: 'present', q: "Fish ___ in water.", ans: "swim", opts: ["swim", "swam"], hint: "General truth" },
        { id: 'p15', cat: 'present', q: "I ___ an apple.", ans: "eat", opts: ["eat", "ate"], hint: "Now" },
        { id: 'p16', cat: 'present', q: "Identify Present Tense:", ans: "I play", opts: ["I play", "I played"], hint: "Ends with -play" },
        { id: 'p17', cat: 'present', q: "Identify Present Tense:", ans: "She sleeps", opts: ["She sleeps", "She slept"], hint: "Happens daily" },
        { id: 'p18', cat: 'present', q: "Rahul ___ happy.", ans: "is", opts: ["is", "was"], hint: "Now" },
        { id: 'p19', cat: 'present', q: "They ___ my friends.", ans: "are", opts: ["are", "were"], hint: "Now" },
        { id: 'p20', cat: 'present', q: "Correct the sentence: She eat food.", ans: "She eats food", opts: ["She eats food", "She ate food"], hint: "Add 's' for She" },
        { id: 'p21', cat: 'present', q: "I ___ early.", ans: "wake up", opts: ["wake up", "woke up"], hint: "Daily" },
        { id: 'p22', cat: 'present', q: "It ___ raining.", ans: "is", opts: ["is", "was"], hint: "Now" },
        { id: 'p23', cat: 'present', q: "We ___ happy today.", ans: "are", opts: ["are", "were"], hint: "Today" },
        { id: 'p24', cat: 'present', q: "The baby ___.", ans: "cries", opts: ["cries", "cried"], hint: "Now" },
        { id: 'p25', cat: 'present', q: "Cow ___ grass.", ans: "eats", opts: ["eats", "ate"], hint: "Habit" },

        // üü† SECTION 2: PAST TENSE (Yesterday)
        { id: 'pa1', cat: 'past', q: "Yesterday I ___ a ball.", ans: "played", opts: ["play", "played"], hint: "Yesterday" },
        { id: 'pa2', cat: 'past', q: "She ___ to school yesterday.", ans: "went", opts: ["go", "went"], hint: "Past of go" },
        { id: 'pa3', cat: 'past', q: "We ___ a movie last night.", ans: "watched", opts: ["watch", "watched"], hint: "Finished action" },
        { id: 'pa4', cat: 'past', q: "I ___ an apple yesterday.", ans: "ate", opts: ["eat", "ate"], hint: "Past of eat" },
        { id: 'pa5', cat: 'past', q: "He ___ milk last night.", ans: "drank", opts: ["drink", "drank"], hint: "Past of drink" },
        { id: 'pa6', cat: 'past', q: "They ___ happy yesterday.", ans: "were", opts: ["are", "were"], hint: "Past of are" },
        { id: 'pa7', cat: 'past', q: "It ___ hot yesterday.", ans: "was", opts: ["is", "was"], hint: "Past of is" },
        { id: 'pa8', cat: 'past', q: "My uncle ___ yesterday.", ans: "came", opts: ["come", "came"], hint: "Past of come" },
        { id: 'pa9', cat: 'past', q: "The bird ___ away.", ans: "flew", opts: ["fly", "flew"], hint: "Past of fly" },
        { id: 'pa10', cat: 'past', q: "I ___ well last night.", ans: "slept", opts: ["sleep", "slept"], hint: "Past of sleep" },
        { id: 'pa11', cat: 'past', q: "Identify Past Tense:", ans: "I jumped", opts: ["I jump", "I jumped"], hint: "Look for -ed" },
        { id: 'pa12', cat: 'past', q: "Identify Past Tense:", ans: "She danced", opts: ["She dances", "She danced"], hint: "Look for -ed" },
        { id: 'pa13', cat: 'past', q: "We ___ a song.", ans: "sang", opts: ["sing", "sang"], hint: "Past of sing" },
        { id: 'pa14', cat: 'past', q: "He ___ a letter.", ans: "wrote", opts: ["write", "wrote"], hint: "Past of write" },
        { id: 'pa15', cat: 'past', q: "Mom ___ a cake.", ans: "baked", opts: ["bake", "baked"], hint: "Finished" },
        { id: 'pa16', cat: 'past', q: "I ___ my homework.", ans: "finished", opts: ["finish", "finished"], hint: "Done" },
        { id: 'pa17', cat: 'past', q: "The dog ___ after the cat.", ans: "ran", opts: ["run", "ran"], hint: "Past of run" },
        { id: 'pa18', cat: 'past', q: "Change to Past: 'I eat'", ans: "I ate", opts: ["I ate", "I eated"], hint: "Irregular" },
        { id: 'pa19', cat: 'past', q: "Change to Past: 'She goes'", ans: "She went", opts: ["She goed", "She went"], hint: "Go -> Went" },
        { id: 'pa20', cat: 'past', q: "We ___ in the pool.", ans: "swam", opts: ["swim", "swam"], hint: "Past of swim" },
        { id: 'pa21', cat: 'past', q: "You ___ me a gift.", ans: "gave", opts: ["give", "gave"], hint: "Past of give" },
        { id: 'pa22', cat: 'past', q: "I ___ a picture.", ans: "drew", opts: ["draw", "drew"], hint: "Past of draw" },
        { id: 'pa23', cat: 'past', q: "The car ___.", ans: "stopped", opts: ["stop", "stopped"], hint: "Finished" },
        { id: 'pa24', cat: 'past', q: "I ___ a loud noise.", ans: "heard", opts: ["hear", "heard"], hint: "Past of hear" },
        { id: 'pa25', cat: 'past', q: "He ___ the ball.", ans: "caught", opts: ["catch", "caught"], hint: "Past of catch" },

        // üîµ SECTION 3: FUTURE TENSE (Will)
        { id: 'f1', cat: 'future', q: "I ___ go to school tomorrow.", ans: "will", opts: ["will", "did"], hint: "Tomorrow" },
        { id: 'f2', cat: 'future', q: "She ___ eat pizza later.", ans: "will", opts: ["will", "was"], hint: "Later" },
        { id: 'f3', cat: 'future', q: "We ___ play on Sunday.", ans: "will", opts: ["will", "are"], hint: "Future" },
        { id: 'f4', cat: 'future', q: "He ___ come soon.", ans: "will", opts: ["will", "is"], hint: "Soon" },
        { id: 'f5', cat: 'future', q: "They ___ visit us.", ans: "will", opts: ["will", "were"], hint: "Future" },
        { id: 'f6', cat: 'future', q: "Tomorrow I ___ read a book.", ans: "will", opts: ["will", "am"], hint: "Tomorrow" },
        { id: 'f7', cat: 'future', q: "Identify Future Tense:", ans: "I will run", opts: ["I ran", "I will run"], hint: "Look for 'will'" },
        { id: 'f8', cat: 'future', q: "Identify Future Tense:", ans: "She will sing", opts: ["She sings", "She will sing"], hint: "Look for 'will'" },
        { id: 'f9', cat: 'future', q: "It ___ rain tonight.", ans: "will", opts: ["will", "did"], hint: "Tonight" },
        { id: 'f10', cat: 'future', q: "Mom ___ cook dinner.", ans: "will", opts: ["will", "cooked"], hint: "Later" },
        { id: 'f11', cat: 'future', q: "I ___ be happy.", ans: "will", opts: ["will", "was"], hint: "Future" },
        { id: 'f12', cat: 'future', q: "We ___ go to the zoo.", ans: "will", opts: ["will", "went"], hint: "Plan" },
        { id: 'f13', cat: 'future', q: "The bus ___ come.", ans: "will", opts: ["will", "came"], hint: "Wait for it" },
        { id: 'f14', cat: 'future', q: "I ___ call you.", ans: "will", opts: ["will", "called"], hint: "Later" },
        { id: 'f15', cat: 'future', q: "You ___ grow tall.", ans: "will", opts: ["will", "are"], hint: "In time" },
        { id: 'f16', cat: 'future', q: "Complete: I ___ help you.", ans: "will", opts: ["will", "did"], hint: "Promise" },
        { id: 'f17', cat: 'future', q: "Next year I ___ be 7.", ans: "will", opts: ["will", "was"], hint: "Next year" },
        { id: 'f18', cat: 'future', q: "Father ___ buy a toy.", ans: "will", opts: ["will", "bought"], hint: "Promise" },
        { id: 'f19', cat: 'future', q: "We ___ win the match.", ans: "will", opts: ["will", "won"], hint: "Hope" },
        { id: 'f20', cat: 'future', q: "The sun ___ rise.", ans: "will", opts: ["will", "rose"], hint: "Tomorrow" },
        { id: 'f21', cat: 'future', q: "Teacher ___ teach us.", ans: "will", opts: ["will", "taught"], hint: "In class" },
        { id: 'f22', cat: 'future', q: "I ___ sleep early.", ans: "will", opts: ["will", "slept"], hint: "Tonight" },
        { id: 'f23', cat: 'future', q: "Choose correct: 'I will ___'", ans: "go", opts: ["go", "went"], hint: "Will + Action" },
        { id: 'f24', cat: 'future', q: "Choose correct: 'She will ___'", ans: "play", opts: ["play", "played"], hint: "Will + Action" },
        { id: 'f25', cat: 'future', q: "Identify: We will dance.", ans: "Future", opts: ["Future", "Past"], hint: "Has 'will'" },

        // üü° SECTION 4: MIXED PRACTICE
        { id: 'm1', cat: 'mix', q: "Yesterday I ___.", ans: "danced", opts: ["dance", "danced"], hint: "Yesterday" },
        { id: 'm2', cat: 'mix', q: "Tomorrow I ___.", ans: "will dance", opts: ["will dance", "danced"], hint: "Tomorrow" },
        { id: 'm3', cat: 'mix', q: "Every day I ___.", ans: "dance", opts: ["dance", "will dance"], hint: "Every day" },
        { id: 'm4', cat: 'mix', q: "She ___ to the park now.", ans: "goes", opts: ["went", "goes"], hint: "Now" },
        { id: 'm5', cat: 'mix', q: "She ___ to the park yesterday.", ans: "went", opts: ["went", "will go"], hint: "Yesterday" },
        { id: 'm6', cat: 'mix', q: "He ___ pizza tomorrow.", ans: "will eat", opts: ["ate", "will eat"], hint: "Tomorrow" },
        { id: 'm7', cat: 'mix', q: "I ___ pizza last night.", ans: "ate", opts: ["ate", "eat"], hint: "Last night" },
        { id: 'm8', cat: 'mix', q: "Which is Past?", ans: "I saw", opts: ["I see", "I saw"], hint: "Saw happens before" },
        { id: 'm9', cat: 'mix', q: "Which is Future?", ans: "I will see", opts: ["I will see", "I saw"], hint: "Will" },
        { id: 'm10', cat: 'mix', q: "I ___ happy today.", ans: "am", opts: ["am", "was"], hint: "Today" },
        { id: 'm11', cat: 'mix', q: "I ___ sad yesterday.", ans: "was", opts: ["am", "was"], hint: "Yesterday" },
        { id: 'm12', cat: 'mix', q: "We ___ milk daily.", ans: "drink", opts: ["drank", "drink"], hint: "Daily" },
        { id: 'm13', cat: 'mix', q: "We ___ milk yesterday.", ans: "drank", opts: ["drank", "drink"], hint: "Yesterday" },
        { id: 'm14', cat: 'mix', q: "Dad ___ a car.", ans: "drives", opts: ["drove", "drives"], hint: "General fact" },
        { id: 'm15', cat: 'mix', q: "Dad ___ the car yesterday.", ans: "drove", opts: ["drove", "drive"], hint: "Yesterday" }
    ];

    /* üéÆ GAME STATE */
    let currentQuestions = [];
    let qIndex = 0;
    let score = { correct: 0, wrong: 0 };
    let canClick = true;

    // üîâ TTS SYSTEM
    function speak(text, isFeedback = false) {
        if ('speechSynthesis' in window) {
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US';
            utterance.rate = isFeedback ? 1 : 0.85; 
            utterance.pitch = 1.1; 
            window.speechSynthesis.speak(utterance);
        }
    }

    // üõ† UTILS
    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    // üöÄ ENGINE
    function startGame(category) {
        // Prepare questions
        let filtered = [];
        let introText = "";
        
        if (category === 'mix') {
            filtered = shuffle([...questionBank]).slice(0, 20); // 20 random mixed
            introText = "Let's check everything! Look at the time words (Yesterday, Tomorrow).";
        } else {
            filtered = shuffle(questionBank.filter(q => q.cat === category));
            if(category === 'present') introText = "Present Tense tells what we do <b>Every Day</b> or <b>Now</b>.";
            if(category === 'past') introText = "Past Tense tells what we did <b>Yesterday</b>.";
            if(category === 'future') introText = "Future Tense tells what we <b>Will</b> do later.";
        }

        currentQuestions = filtered;
        qIndex = 0;
        score = { correct: 0, wrong: 0 };
        updateScoreboard();

        // UI Setup
        document.getElementById('menu-screen').style.display = 'none';
        document.getElementById('end-screen').style.display = 'none';
        document.getElementById('game-screen').style.display = 'block';
        
        document.getElementById('learn-text').innerHTML = introText;
        document.getElementById('learn-card').style.display = 'block';

        loadQuestion();
    }

    function loadQuestion() {
        if (qIndex >= currentQuestions.length) {
            endGame();
            return;
        }

        const q = currentQuestions[qIndex];
        const qText = document.getElementById('q-text');
        const optsDiv = document.getElementById('options-container');
        const nextBtn = document.getElementById('next-btn');
        const feedback = document.getElementById('feedback-area');
        const progress = document.getElementById('progress-bar');

        // Reset UI
        qText.innerHTML = q.q.replace("___", "<span class='highlight'>____</span>");
        optsDiv.innerHTML = '';
        nextBtn.style.display = 'none';
        feedback.style.opacity = '0';
        canClick = true;

        // Progress
        const pct = (qIndex / currentQuestions.length) * 100;
        progress.style.width = pct + "%";

        // Speak Question
        speak(q.q.replace("___", "blank"));

        // Render Options
        const shuffledOpts = shuffle([...q.opts]);
        shuffledOpts.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(btn, opt, q.ans);
            optsDiv.appendChild(btn);
        });
    }

    function checkAnswer(btn, selected, correct) {
        if (!canClick) return;
        canClick = false;

        const feedback = document.getElementById('feedback-area');
        const nextBtn = document.getElementById('next-btn');
        const allOpts = document.querySelectorAll('.option-btn');

        if (selected === correct) {
            // Correct
            score.correct++;
            btn.classList.add('correct-btn');
            const rewards = ["üåü Excellent!", "‚≠ê Very Good!", "üéâ Super Star!", "‚ú® Awesome!"];
            const msg = rewards[Math.floor(Math.random() * rewards.length)];
            feedback.innerHTML = `<span style="color:#27ae60">${msg}</span>`;
            speak("Correct! " + msg, true);
        } else {
            // Wrong
            score.wrong++;
            btn.classList.add('wrong-btn');
            const comforts = ["‚ùå Try Again", "üôÇ Don't Worry", "üí™ Keep Practicing"];
            const msg = comforts[Math.floor(Math.random() * comforts.length)];
            feedback.innerHTML = `<span style="color:#c0392b">${msg}. Answer: <b>${correct}</b></span>`;
            speak("Oops. The answer is " + correct, true);
            
            // Show right answer
            allOpts.forEach(b => {
                if (b.innerText === correct) b.classList.add('correct-btn');
            });
        }

        feedback.style.opacity = '1';
        nextBtn.style.display = 'block';
        updateScoreboard();
    }

    function nextQuestion() {
        qIndex++;
        loadQuestion();
    }

    function updateScoreboard() {
        document.getElementById('score-correct').innerText = score.correct;
        document.getElementById('score-wrong').innerText = score.wrong;
        const total = score.correct + score.wrong;
        const pct = total === 0 ? 0 : Math.round((score.correct / total) * 100);
        document.getElementById('score-pct').innerText = pct + "%";
    }

    function endGame() {
        document.getElementById('game-screen').style.display = 'none';
        document.getElementById('end-screen').style.display = 'block';
        
        document.getElementById('final-correct').innerText = score.correct;
        document.getElementById('final-wrong').innerText = score.wrong;
        const total = score.correct + score.wrong;
        const pct = total === 0 ? 0 : Math.round((score.correct / total) * 100);
        document.getElementById('final-score').innerText = pct + "%";

        if (pct > 80) speak("Congratulations! You are a Tense Master!", true);
        else speak("Good job! Keep practicing.", true);
    }

    function goHome() {
        document.getElementById('game-screen').style.display = 'none';
        document.getElementById('end-screen').style.display = 'none';
        document.getElementById('menu-screen').style.display = 'grid';
        window.speechSynthesis.cancel();
    }

</script>

</body>
</html>