<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üå± Class 2 EVS ‚Äì Chapter 4: Uses of Plants</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Comic+Neue:wght@400;700&family=Patrick+Hand&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-green: #43a047;
            --light-green: #a5d6a7;
            --wood-brown: #795548;
            --fruit-red: #e53935;
            --sky-blue: #29b6f6;
            --text-dark: #2c3e50;
            --bg-gradient: linear-gradient(135deg, #e8f5e9 0%, #fff8e1 100%);
        }

        * { box-sizing: border-box; user-select: none; }

        body {
            font-family: 'Comic Neue', cursive;
            background: var(--bg-gradient);
            margin: 0;
            padding: 0;
            color: var(--text-dark);
        }

        /* --- Header --- */
        header {
            background: linear-gradient(to right, #11998e, #38ef7d);
            padding: 20px;
            text-align: center;
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
            position: relative;
            z-index: 10;
        }

        h1 {
            font-family: 'Fredoka One', cursive;
            margin: 0;
            font-size: 2.2rem;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
            letter-spacing: 1px;
            transition: transform 0.3s;
        }
        
        h1:hover { transform: scale(1.02); }

        .header-icons span {
            font-size: 2.5rem;
            display: inline-block;
            margin: 0 8px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* --- Layout --- */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        /* --- Section 1: Detailed Notes --- */
        .notes-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            border: 3px solid var(--primary-green);
        }

        .section-title {
            font-family: 'Fredoka One', cursive;
            color: var(--wood-brown);
            text-align: center;
            font-size: 1.8rem;
            margin-bottom: 20px;
        }

        /* Cursive Font for Notes */
        .cursive-text {
            font-family: 'Patrick Hand', cursive;
            font-size: 1.5rem;
            line-height: 1.6;
            color: #3e2723;
        }

        /* Accordion Style */
        .accordion {
            background-color: #f1f8e9;
            color: var(--primary-green);
            cursor: pointer;
            padding: 15px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 1.3rem;
            font-family: 'Fredoka One', cursive;
            transition: 0.4s;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 6px solid var(--primary-green);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .active, .accordion:hover {
            background-color: var(--light-green);
            color: #1b5e20;
        }

        .panel {
            padding: 0 18px;
            background-color: white;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            margin-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .use-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
            text-align: center;
            margin-top: 10px;
            margin-bottom: 15px;
        }
        
        .use-card {
            background: #fff;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            border: 1px solid #ddd;
        }
        .use-icon { font-size: 2.5rem; display: block; margin-bottom: 5px; }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
            border-bottom: 2px dashed var(--fruit-red);
            cursor: help;
            color: var(--fruit-red);
            font-weight: bold;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 5;
            bottom: 130%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-family: 'Comic Neue';
            font-size: 1rem;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
        
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }

        .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }

        /* --- Section 2: Game Area --- */
        .game-section {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            border: 3px solid var(--wood-brown);
            text-align: center;
        }

        .score-board {
            display: flex;
            justify-content: space-around;
            background: #fff3e0;
            padding: 12px;
            border-radius: 15px;
            margin-bottom: 20px;
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--wood-brown);
            border: 2px solid #ffe0b2;
        }

        .level-selector { margin-bottom: 20px; }

        .level-btn {
            padding: 10px 20px;
            font-family: 'Fredoka One';
            border: none;
            border-radius: 20px;
            margin: 5px;
            cursor: pointer;
            background: #eceff1;
            color: #546e7a;
            transition: 0.3s;
            box-shadow: 0 3px 0 #cfd8dc;
        }

        .level-btn.active-level {
            background: var(--fruit-red);
            color: white;
            transform: scale(1.1);
            box-shadow: 0 4px 0 #b71c1c;
        }

        .question-card {
            background: #e1f5fe; /* Light Blue */
            padding: 25px;
            border-radius: 20px;
            min-height: 250px;
            position: relative;
            border: 2px dashed #0288d1;
        }

        .audio-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            border: 2px solid var(--sky-blue);
            border-radius: 50%;
            width: 45px;
            height: 45px;
            cursor: pointer;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .q-text {
            font-size: 1.6rem;
            margin: 20px 0;
            font-weight: bold;
            color: #01579b;
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .option-btn {
            background: white;
            border: 3px solid #b3e5fc;
            padding: 15px;
            border-radius: 15px;
            font-family: 'Comic Neue';
            font-size: 1.2rem;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100px;
            font-weight: bold;
        }

        .option-btn:hover {
            border-color: var(--sky-blue);
            background: #e1f5fe;
            transform: translateY(-3px);
        }
        
        .opt-emoji { font-size: 2.2rem; margin-bottom: 5px; }

        /* Input Field Style */
        .input-answer {
            padding: 15px;
            font-size: 1.4rem;
            border-radius: 10px;
            border: 3px solid var(--sky-blue);
            width: 80%;
            text-align: center;
            font-family: 'Comic Neue';
            margin-bottom: 15px;
            outline: none;
        }

        .submit-btn {
            background: var(--primary-green);
            color: white;
            border: none;
            padding: 10px 30px;
            border-radius: 20px;
            font-size: 1.2rem;
            font-family: 'Fredoka One';
            cursor: pointer;
            box-shadow: 0 4px 0 #2e7d32;
        }
        .submit-btn:active { transform: translateY(4px); box-shadow: none; }

        /* Feedback Modal */
        .feedback-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 25px;
            box-shadow: 0 0 100px rgba(0,0,0,0.5);
            z-index: 1000;
            text-align: center;
            display: none;
            border: 6px solid;
            width: 90%;
            max-width: 400px;
        }
        
        .overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 999;
            display: none;
            backdrop-filter: blur(4px);
        }

        .fb-emoji { font-size: 5rem; display: block; margin-bottom: 10px; animation: pop 0.5s; }
        
        @keyframes pop { 0% { transform: scale(0); } 70% { transform: scale(1.2); } 100% { transform: scale(1); } }

        .next-btn {
            background: var(--wood-brown);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1.3rem;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 15px;
            font-family: 'Fredoka One';
            box-shadow: 0 4px 0 #4e342e;
        }
        .next-btn:active { transform: translateY(4px); box-shadow: none; }

        /* --- Footer --- */
        footer {
            background: #263238;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
        }
        
        footer p { margin: 5px 0; transition: transform 0.3s; }
        footer p:hover { transform: scale(1.05); color: var(--light-green); }

        /* Responsive */
        @media (max-width: 600px) {
            h1 { font-size: 1.5rem; }
            .option-btn { font-size: 1.1rem; padding: 10px; }
            .header-icons span { font-size: 1.8rem; }
            .cursive-text { font-size: 1.2rem; }
        }
    </style>
</head>
<body>

<header>
    <h1>üå± Class 2 EVS <br> Chapter 4: Uses of Plants</h1>
    <div class="header-icons">
        <span>üçé</span><span>üåø</span><span>üíä</span><span>ü™µ</span><span>üè°</span>
    </div>
</header>

<main class="container">

    <section class="notes-section">
        <h2 class="section-title">üìñ Let's Learn: What do Plants Give Us?</h2>
        
        <button class="accordion">1. Plants give us Food üçéü•¶</button>
        <div class="panel cursive-text">
            <p>We cannot live without food! Plants give us energy.</p>
            <div class="use-grid">
                <div class="use-card"><span class="use-icon">üçé</span><strong>Fruits</strong><br>Apple, Mango</div>
                <div class="use-card"><span class="use-icon">ü•¶</span><strong>Vegetables</strong><br>Carrot, Potato</div>
                <div class="use-card"><span class="use-icon">üçû</span><strong>Grains</strong><br>Wheat, Rice</div>
                <div class="use-card"><span class="use-icon">ü•ú</span><strong>Nuts</strong><br>Almonds, Cashews</div>
            </div>
            <p>They give us vitamins to stay strong!</p>
        </div>

        <button class="accordion">2. Plants give us Air (Oxygen) üå¨Ô∏è</button>
        <div class="panel cursive-text">
            <p>Plants breathe in dirty air and give out <strong>Fresh Oxygen</strong>.</p>
            <p>Humans and animals need oxygen to breathe and live.</p>
            <p>More Trees = Cleaner Air! üå≥</p>
        </div>

        <button class="accordion">3. Plants give us Medicine üíä</button>
        <div class="panel cursive-text">
            <p>Some plants make us feel better when we are sick.</p>
            <ul>
                <li><strong>Tulsi:</strong> Good for cough and cold. ü§ß</li>
                <li><strong>Neem:</strong> Good for skin problems. <span class="tooltip">‚ÑπÔ∏è<span class="tooltiptext">Neem is also used in toothpaste!</span></span></li>
                <li><strong>Aloe Vera:</strong> Good for burns and skin. üåµ</li>
            </ul>
        </div>

        <button class="accordion">4. Wood & Shelter ü™µüè°</button>
        <div class="panel cursive-text">
            <p><strong>Wood:</strong> We use wood to make tables, chairs, pencils, and paper!</p>
            <p><strong>Shelter:</strong> Trees are homes for birds, monkeys, and squirrels. üê¶üêí</p>
        </div>

        <button class="accordion">5. Other Useful Things üå∏üßµ</button>
        <div class="panel cursive-text">
            <p>Plants give us so many things!</p>
            <ul>
                <li><strong>Clothes:</strong> Cotton plant gives cotton for shirts. üëï</li>
                <li><strong>Perfume:</strong> Jasmine and Rose smell nice. üåπ</li>
                <li><strong>Oil:</strong> Mustard and Coconut seeds give oil. ü••</li>
                <li><strong>Rope:</strong> Jute plant is used for ropes. ü™¢</li>
            </ul>
        </div>
    </section>

    <section class="game-section" id="exercise-area">
        <h2 class="section-title">üéÆ Fun Quiz: Uses of Plants</h2>
        
        <div class="score-board">
            <span>‚≠ê Stars: <span id="star-count">0</span></span>
            <span>‚úÖ Score: <span id="score">0</span></span>
            <span>üìù Left: <span id="q-left">50</span></span>
        </div>

        <div class="level-selector">
            <button class="level-btn active-level" onclick="setLevel(1)">Level 1 (Basic)</button>
            <button class="level-btn" onclick="setLevel(2)">Level 2 (Thinker)</button>
            <button class="level-btn" onclick="setLevel(3)">Level 3 (Genius)</button>
        </div>

        <div class="question-card" id="question-container">
            <button class="audio-btn" onclick="readQuestion()">üîä</button>
            <div id="q-image" style="font-size:3.5rem; margin-bottom:10px;"></div>
            <div class="q-text" id="q-text">Loading...</div>
            
            <div id="interaction-area">
                </div>
        </div>
    </section>

</main>

<div class="overlay" id="overlay"></div>
<div class="feedback-modal" id="feedback-modal">
    <span class="fb-emoji" id="fb-emoji">üéâ</span>
    <h2 id="fb-title">Correct!</h2>
    <p id="fb-msg">You are doing great!</p>
    <button class="next-btn" onclick="nextQuestion()">Next Question ‚û°</button>
</div>

<footer>
    <p>Designed & Created by <strong>SHRISHANT YADAV</strong></p>
    <p>¬© 2026 ShanEduHub</p>
</footer>

<script>
    // --- Data: 50+ Unique Questions ---
    const allQuestions = [
        // LEVEL 1: Basic (Identification)
        { id: 1, level: 1, type: 'img', q: "Tap the plant that gives us FRUITS.", opts: [{t:"Apple Tree", i:"üçé"}, {t:"Rose", i:"üåπ"}, {t:"Grass", i:"üå±"}], ans: "Apple Tree" },
        { id: 2, level: 1, type: 'img', q: "Tap the VEGETABLE.", opts: [{t:"Carrot", i:"ü•ï"}, {t:"Mango", i:"ü•≠"}, {t:"Lily", i:"‚öúÔ∏è"}], ans: "Carrot" },
        { id: 3, level: 1, type: 'mcq', q: "Tulsi is used as...", opts: [{t:"Medicine", i:"üíä"}, {t:"Furniture", i:"ü™ë"}], ans: "Medicine" },
        { id: 4, level: 1, type: 'tf', q: "We get oxygen from plants.", opts: [{t:"True", i:"‚úÖ"}, {t:"False", i:"‚ùå"}], ans: "True" },
        { id: 5, level: 1, type: 'img', q: "Which one is made of WOOD?", opts: [{t:"Chair", i:"ü™ë"}, {t:"Glass", i:"ü•õ"}, {t:"Shirt", i:"üëï"}], ans: "Chair" },
        { id: 6, level: 1, type: 'mcq', q: "Which plant gives us Cotton?", opts: [{t:"Cotton Plant", i:"‚òÅÔ∏è"}, {t:"Neem", i:"üåø"}], ans: "Cotton Plant" },
        { id: 7, level: 1, type: 'img', q: "Tap the plant used for MEDICINE.", opts: [{t:"Aloe Vera", i:"üåµ"}, {t:"Grass", i:"üå±"}], ans: "Aloe Vera" },
        { id: 8, level: 1, type: 'mcq', q: "Trees provide ___ to birds.", opts: [{t:"Shelter/Home", i:"üè°"}, {t:"Cars", i:"üöó"}], ans: "Shelter/Home" },
        { id: 9, level: 1, type: 'match', q: "Match: Neem ‚Üí ___", opts: [{t:"Medicine", i:"üíä"}, {t:"Food", i:"üçî"}], ans: "Medicine" },
        { id: 10, level: 1, type: 'tf', q: "All plants give us burgers.", opts: [{t:"True", i:"üçî"}, {t:"False", i:"‚ùå"}], ans: "False" },
        { id: 11, level: 1, type: 'img', q: "Which creates SHADE?", opts: [{t:"Big Tree", i:"üå≥"}, {t:"Small Herb", i:"üå±"}], ans: "Big Tree" },
        { id: 12, level: 1, type: 'mcq', q: "We make paper from...", opts: [{t:"Wood/Bamboo", i:"üéã"}, {t:"Plastic", i:"ü•§"}], ans: "Wood/Bamboo" },
        { id: 13, level: 1, type: 'img', q: "Tap the object made from FLOWERS.", opts: [{t:"Perfume", i:"üå∏"}, {t:"Book", i:"üìö"}], ans: "Perfume" },
        { id: 14, level: 1, type: 'tf', q: "Plants give us clean air.", opts: [{t:"True", i:"üå¨Ô∏è"}, {t:"False", i:"üí®"}], ans: "True" },
        { id: 15, level: 1, type: 'img', q: "Tap the GRAIN.", opts: [{t:"Wheat", i:"üåæ"}, {t:"Potato", i:"ü•î"}, {t:"Grapes", i:"üçá"}], ans: "Wheat" },

        // LEVEL 2: Intermediate (Reasoning & Connections)
        { id: 16, level: 2, type: 'mcq', q: "Cotton is used to make...", opts: [{t:"Clothes", i:"üëó"}, {t:"Food", i:"ü•ò"}], ans: "Clothes" },
        { id: 17, level: 2, type: 'img', q: "Tap the source of OIL.", opts: [{t:"Coconut", i:"ü••"}, {t:"Apple", i:"üçé"}], ans: "Coconut" },
        { id: 18, level: 2, type: 'mcq', q: "Aloe Vera is good for...", opts: [{t:"Skin", i:"üñêÔ∏è"}, {t:"Making tables", i:"ü™ë"}], ans: "Skin" },
        { id: 19, level: 2, type: 'match', q: "Match: Jute Plant ‚Üí ___", opts: [{t:"Ropes", i:"ü™¢"}, {t:"Perfume", i:"üå∏"}], ans: "Ropes" },
        { id: 20, level: 2, type: 'tf', q: "We can eat the stem of Sugarcane.", opts: [{t:"True", i:"üéã"}, {t:"False", i:"‚ùå"}], ans: "True" },
        { id: 21, level: 2, type: 'mcq', q: "Which animal lives on trees?", opts: [{t:"Monkey", i:"üêí"}, {t:"Cow", i:"üêÑ"}], ans: "Monkey" },
        { id: 22, level: 2, type: 'img', q: "Which is used for FIREWOOD?", opts: [{t:"Dry Wood", i:"ü™µ"}, {t:"Green Leaf", i:"üçÉ"}], ans: "Dry Wood" },
        { id: 23, level: 2, type: 'mcq', q: "Rose is used for decoration because...", opts: [{t:"It is beautiful", i:"üåπ"}, {t:"It is tasty", i:"üòã"}], ans: "It is beautiful" },
        { id: 24, level: 2, type: 'tf', q: "Rubber comes from a tree.", opts: [{t:"True", i:"‚úÖ"}, {t:"False", i:"‚ùå"}], ans: "True" },
        { id: 25, level: 2, type: 'match', q: "Match: Bamboo ‚Üí ___", opts: [{t:"House/Paper", i:"üõñ"}, {t:"Oil", i:"üõ¢Ô∏è"}], ans: "House/Paper" },
        { id: 26, level: 2, type: 'mcq', q: "Mustard seeds give us...", opts: [{t:"Oil", i:"üõ¢Ô∏è"}, {t:"Juice", i:"üçπ"}], ans: "Oil" },
        { id: 27, level: 2, type: 'mcq', q: "Gum is obtained from...", opts: [{t:"Trees", i:"üå≥"}, {t:"Rocks", i:"ü™®"}], ans: "Trees" },
        { id: 28, level: 2, type: 'img', q: "Tap the SPICE.", opts: [{t:"Chilli", i:"üå∂Ô∏è"}, {t:"Banana", i:"üçå"}], ans: "Chilli" },
        { id: 29, level: 2, type: 'tf', q: "We should cut all trees for wood.", opts: [{t:"True", i:"ü™ì"}, {t:"False", i:"üö´"}], ans: "False" },
        { id: 30, level: 2, type: 'input', q: "Name a plant used for medicine.", ans: ["tulsi", "neem", "aloe vera", "mint", "turmeric"] },
        { id: 31, level: 2, type: 'mcq', q: "Dry leaves can be made into...", opts: [{t:"Compost/Manure", i:"üçÇ"}, {t:"Plastic", i:"ü•§"}], ans: "Compost/Manure" },
        { id: 32, level: 2, type: 'img', q: "Tap the DRY FRUIT (Nut).", opts: [{t:"Walnut", i:"üå∞"}, {t:"Watermelon", i:"üçâ"}], ans: "Walnut" },
        { id: 33, level: 2, type: 'mcq', q: "Flowers are used to make...", opts: [{t:"Garlands", i:"üèµÔ∏è"}, {t:"Bricks", i:"üß±"}], ans: "Garlands" },
        { id: 34, level: 2, type: 'tf', q: "Paper is a plant product.", opts: [{t:"True", i:"üìù"}, {t:"False", i:"‚ùå"}], ans: "True" },
        { id: 35, level: 2, type: 'match', q: "Match: Teak Tree ‚Üí ___", opts: [{t:"Furniture", i:"ü™ë"}, {t:"Food", i:"ü•ò"}], ans: "Furniture" },

        // LEVEL 3: Advanced (Logic & Application)
        { id: 36, level: 3, type: 'mcq', q: "Plants take in Carbon Dioxide and give out...", opts: [{t:"Oxygen", i:"üå¨Ô∏è"}, {t:"Smoke", i:"üå´Ô∏è"}], ans: "Oxygen" },
        { id: 37, level: 3, type: 'input', q: "Name one furniture item made of wood.", ans: ["chair", "table", "bed", "door", "desk"] },
        { id: 38, level: 3, type: 'mcq', q: "Which plant part gives us Oil?", opts: [{t:"Seeds", i:"üå∞"}, {t:"Roots", i:"üç†"}], ans: "Seeds" },
        { id: 39, level: 3, type: 'tf', q: "Neem is used in toothpaste.", opts: [{t:"True", i:"ü¶∑"}, {t:"False", i:"‚ùå"}], ans: "True" },
        { id: 40, level: 3, type: 'mcq', q: "Coffee is made from...", opts: [{t:"Coffee Beans", i:"‚òï"}, {t:"Leaves", i:"üçÉ"}], ans: "Coffee Beans" },
        { id: 41, level: 3, type: 'img', q: "Identify the PULSE (Dal).", opts: [{t:"Lentils", i:"ü•£"}, {t:"Rice", i:"üçö"}], ans: "Lentils" },
        { id: 42, level: 3, type: 'mcq', q: "What helps cure a cough?", opts: [{t:"Tulsi/Ginger", i:"üåø"}, {t:"Ice Cream", i:"üç¶"}], ans: "Tulsi/Ginger" },
        { id: 43, level: 3, type: 'input', q: "Name a flower used for perfume.", ans: ["rose", "jasmine", "lily", "lavender"] },
        { id: 44, level: 3, type: 'mcq', q: "Fibre for ropes comes from...", opts: [{t:"Coconut/Jute", i:"ü••"}, {t:"Mango", i:"ü•≠"}], ans: "Coconut/Jute" },
        { id: 45, level: 3, type: 'tf', q: "Plants protect soil from washing away.", opts: [{t:"True", i:"‚úÖ"}, {t:"False", i:"‚ùå"}], ans: "True" },
        { id: 46, level: 3, type: 'mcq', q: "Which is NOT a plant product?", opts: [{t:"Plastic", i:"ü•§"}, {t:"Paper", i:"üìù"}], ans: "Plastic" },
        { id: 47, level: 3, type: 'input', q: "What do we need to breathe?", ans: ["oxygen", "air"] },
        { id: 48, level: 3, type: 'mcq', q: "Turmeric (Haldi) is used as a...", opts: [{t:"Spice & Medicine", i:"üíä"}, {t:"Fruit", i:"üçé"}], ans: "Spice & Medicine" },
        { id: 49, level: 3, type: 'mcq', q: "Tea is made from the plant's...", opts: [{t:"Leaves", i:"üçÉ"}, {t:"Roots", i:"üç†"}], ans: "Leaves" },
        { id: 50, level: 3, type: 'mcq', q: "Why are plants our friends?", opts: [{t:"They give everything", i:"üéÅ"}, {t:"They talk to us", i:"üó£Ô∏è"}], ans: "They give everything" }
    ];

    // --- State ---
    let currentLevel = 1;
    let currentQuestions = [];
    let currentQIndex = 0;
    let score = 0;
    let stars = 0;

    // --- Init ---
    document.addEventListener("DOMContentLoaded", () => {
        setupAccordions();
        setLevel(1);
    });

    function setupAccordions() {
        const acc = document.getElementsByClassName("accordion");
        for (let i = 0; i < acc.length; i++) {
            acc[i].addEventListener("click", function() {
                this.classList.toggle("active");
                const panel = this.nextElementSibling;
                if (panel.style.maxHeight) {
                    panel.style.maxHeight = null;
                } else {
                    panel.style.maxHeight = panel.scrollHeight + "px";
                }
            });
        }
    }

    // --- Game Logic ---
    function setLevel(lvl) {
        currentLevel = lvl;
        // Update Buttons
        document.querySelectorAll('.level-btn').forEach(b => b.classList.remove('active-level'));
        document.querySelectorAll('.level-btn')[lvl-1].classList.add('active-level');
        
        // Filter & Shuffle
        currentQuestions = allQuestions.filter(q => q.level === lvl).sort(() => Math.random() - 0.5);
        currentQIndex = 0;
        
        updateUI();
        loadQuestion();
    }

    function loadQuestion() {
        if (currentQIndex >= currentQuestions.length) {
            showLevelComplete();
            return;
        }

        const q = currentQuestions[currentQIndex];
        const container = document.getElementById('interaction-area');
        container.innerHTML = '';
        
        document.getElementById('q-text').innerText = `${currentQIndex + 1}. ${q.q}`;
        document.getElementById('q-image').innerText = q.type === 'img' ? 'üñºÔ∏è' : (q.type === 'input' ? '‚úçÔ∏è' : '‚ùì');

        // Handle Input Type vs Button Types
        if (q.type === 'input') {
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'input-answer';
            input.placeholder = "Type answer here...";
            input.id = 'user-input';
            
            const btn = document.createElement('button');
            btn.className = 'submit-btn';
            btn.innerText = "Check Answer";
            btn.onclick = () => checkInputAnswer(q.ans);
            
            container.appendChild(input);
            container.appendChild(document.createElement('br'));
            container.appendChild(btn);
        } else {
            const grid = document.createElement('div');
            grid.className = 'options-grid';
            
            // Shuffle options
            const shuffled = [...q.opts].sort(() => Math.random() - 0.5);
            
            shuffled.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerHTML = `<span class="opt-emoji">${opt.i}</span>${opt.t}`;
                btn.onclick = () => checkButtonAnswer(opt.t, q.ans);
                grid.appendChild(btn);
            });
            container.appendChild(grid);
        }
    }

    function checkButtonAnswer(selected, correct) {
        handleFeedback(selected === correct, correct);
    }

    function checkInputAnswer(correctArr) {
        const userVal = document.getElementById('user-input').value.toLowerCase().trim();
        // Check if userVal exists in the allowed answers array
        const isCorrect = correctArr.includes(userVal);
        // Pass a nice formatted string of correct answers for display
        handleFeedback(isCorrect, correctArr[0].toUpperCase()); 
    }

    function handleFeedback(isCorrect, correctDisplay) {
        const modal = document.getElementById('feedback-modal');
        const overlay = document.getElementById('overlay');
        const title = document.getElementById('fb-title');
        const msg = document.getElementById('fb-msg');
        const emoji = document.getElementById('fb-emoji');

        modal.style.display = 'block';
        overlay.style.display = 'block';

        if (isCorrect) {
            title.innerText = "Awesome! üéâ";
            title.style.color = "#43a047";
            msg.innerText = "That is the correct answer!";
            emoji.innerText = "ü§©";
            modal.style.borderColor = "#43a047";
            score += 10;
            if (score % 50 === 0) stars++;
            speak("Correct! You are doing great.");
        } else {
            title.innerText = "Oh no! üòÖ";
            title.style.color = "#e53935";
            msg.innerText = `The correct answer was: ${correctDisplay}`;
            emoji.innerText = "ü§î";
            modal.style.borderColor = "#e53935";
            speak("Oops, that was wrong. Try again.");
        }
        updateUI();
    }

    function nextQuestion() {
        document.getElementById('feedback-modal').style.display = 'none';
        document.getElementById('overlay').style.display = 'none';
        currentQIndex++;
        loadQuestion();
    }

    function showLevelComplete() {
        const modal = document.getElementById('feedback-modal');
        const overlay = document.getElementById('overlay');
        modal.style.display = 'block';
        overlay.style.display = 'block';
        
        document.getElementById('fb-title').innerText = "Level Complete! üèÜ";
        document.getElementById('fb-msg').innerText = "You know so many uses of plants!";
        document.getElementById('fb-emoji').innerText = "üå≥";
        
        const nextBtn = document.querySelector('.next-btn');
        nextBtn.innerText = "Close";
        nextBtn.onclick = () => {
             modal.style.display = 'none';
             overlay.style.display = 'none';
             nextBtn.innerText = "Next Question ‚û°";
             nextBtn.onclick = nextQuestion; 
        };
        speak("Level Complete. Excellent work!");
    }

    function updateUI() {
        document.getElementById('score').innerText = score;
        document.getElementById('star-count').innerText = stars;
        document.getElementById('q-left').innerText = (currentQuestions.length - currentQIndex);
    }

    function readQuestion() {
        const text = currentQuestions[currentQIndex].q;
        speak(text);
    }

    function speak(text) {
        if ('speechSynthesis' in window) {
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.pitch = 1.1;
            utterance.rate = 0.9;
            window.speechSynthesis.speak(utterance);
        }
    }
</script>

</body>
</html>